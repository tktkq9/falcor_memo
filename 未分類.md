# 未分類

## SampleGenerator
レイトレとかで使うサンプル生成slang管理クラス  

シェーダー側のSampleGeneratorはSampleGeneratorType.slanghにある#defineでどのサンプラーを使うか決めればいいだけなので、  
このクラスではそのDefineListを管理しているだけ  

### SampleGenerator.slang
1D、2D、3DサンプルをSampleGeneratorから作成する  
SampleGeneratorはISampleGeneratorインターフェースによってによって実装されている

ISampleGeneratorは
UniformSampleGenerator.slangとTinyUniformSampleGenerator.slangの2つであり、
SampleGeneratorType.slanghで定義されている#defineでどちらを使うが制御される  

### UniformSampleGenerator.slang
一様ランダム   
SplitMix64でpixelとsampleNumberからseedを作り、 
Xoshiroでランダム生成をしている  

### TinyUniformSampleGenerator.slang
軽い一様ランダム  
pixelとsampleNumberからseedを作り、 
LCGでランダム生成している  


## PixelDebug
クリックしたピクセルの情報をimguiに表示するためのクラス  
imguiのwidget.checkbox("Pixel debug", mEnabled)にチェックを入れると動く  

シェーダー変数を設定できるようにするため、ダミーのmainシェーダーComputeProgramを作成し、これに必要な変数の格納を行う  
beginFramejでピクセル情報を格納するストラクチャーバッファーとそれをリードバックするバッファーを確保  
endFrameでcopyBufferRegionしてストラクチャーバッファーをリードバックバッファー（ログの配列サイズをmpCounterBuffer、配列の中身をmpDataBuffer）にコピー  
prepareProgramでシェーダー変数設定

###   PixelDebugTypes.slang
CPU側とGPU側両方で使うピクセルデータやタイプのstruct  

Utils/HostDeviceShared.slanghやBEGIN_NAMESPACE_FALCOR、END_NAMESPACE_FALCORによってc++コードの方でも扱うことができるようになっている  

###   PixelDebug.slang
UIで選んだピクセル位置の情報を取得するためのシェーダー側処理  
printSetPixel()で各々のスレッドのピクセル位置を設定し、print()関数の時にクリックした場所と一致しているか確認し、そうであればデータを格納する  

TODO : print()が呼ばれているところが見当たらないがどこ？
<!--stackedit_data:
eyJoaXN0b3J5IjpbLTE5OTY3MDMsLTQ2MjUwNzk1NSw0MTkwMT
AzODcsMTUwNDM3NzYzOCwxMTc2MTUwODI4LDIwOTc0MjM2MSwy
MDg2NDM1MzU4LDE0MjQwNzk1OTYsLTExMTE1NzMyNzgsLTYwOD
AwNjIyMywtMTkyNjc2MDY2MCwxNTcxMjEyMDQzLC0xOTk2ODQ0
NDc5LDg3MjU4OTAxNiwtMTkwNzE2NTc3MywtNTkxOTMwNjgwLC
01MTgwOTMyNDgsLTE5NjAxMjc5NjYsOTE2MDIyNzQ3LC0xMDY1
MzYyNDU4XX0=
-->