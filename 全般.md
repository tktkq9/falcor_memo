# Falcorプロジェクト
dll作成用プロジェクト  
このdllを使ってほかのプロジェクトでテストとか描画とかMogwaiとかする  
なのでまずはこれをビルド or ソリューションをビルドしてからじゃないとほかのプロジェクトは動かない  

# Slang
このプロジェクトのシェーダーはHLSLではなく [HLSL ベースの新しいシェーダ言語](http://masafumi.cocolog-nifty.com/masafumis_diary/2018/11/hlsl-slang-8752.html)であるslangによって書かれている  
 [slang github](https://github.com/shader-slang/slang)  
 
 拡張性のあるシェーダー作成として行われる方法の一つであるメタプログラミングではなく、シェーダー側でインターフェース実装を行い、中間言語により動的にシェーダーを変更できるようになっており、[論文](http://graphics.cs.cmu.edu/projects/slang/)曰く今までよりもかなり少ない労力で追加機能の実装が行えるシェーダー言語である（しかも描画速度も速い）  
 またシェーダー言語側で設定されるParameterBlockによりCPU側から構造体や変数名を直接割り当てできるような、 レジスター番号管理をしなくて済む機能も付いている  

salng.hによりコンパイルやエントリーポイントの作成、またslang特有のParameterBlockやインターフェースなどの設定を行い、Falcorでもこのヘッダーが利用されている  
参考として[slang/example](https://github.com/shader-slang/slang/tree/master/examples)  に簡単な実装例があり、とりあえず[slang/examples/hello-world/](https://github.com/shader-slang/slang/tree/master/examples/hello-world)と[slang/examples/model-viewer/](https://github.com/shader-slang/slang/tree/master/examples/model-viewer)を見れば大体分かる  
（Falcorのsalng.hと比較したところ2020/12時点で出ているバージョンよりは古いっぽい）

（ちなみに2020/12時点では、このslangとそのコンパイラーはまだ製作中のようなので、今後使い方が変わる可能性あり  
またFAQ曰く、まだFalcorくらいでしか採用されていないらしい）  

# NVAPI
NVIDIA GPUに直接アクセスしていろいろできるAPIらしい  
https://developer.nvidia.com/nvapi  

機能の一つとして、シェーダー内で高精度で時間取得が可能となる  
以下の記事のように、TraceRayの始終で時間を取得し  
`uint time = NvGetSpecial(NV_SPECIALOP_GLOBAL_TIMER_LO );`  
ヒートマップなどを出力し、各ピクセルでのレイトラバーサルの重さを比較、リファクタするときなどに使う  
使う際にはシェーダーに fake UAV slot を割り当てるNVAPI処理をする  

参考 : https://developer.nvidia.com/blog/profiling-dxr-shaders-with-timer-instrumentation/  


<!--stackedit_data:
eyJoaXN0b3J5IjpbLTI3NTc3MDE3MywxMDY3MzUzNjk5LDI1Nj
k2ODk4NSwxNjIyODcyMDg1LDE2ODE1MDQ1MjcsLTE4NDE1MzU0
MzIsMTk3NTMyNDU2NSwxOTcwMjA3ODY1LDM4MDE2NDM4MSwtMz
MxOTMxOTI0LC0xMzM1MDc4MzY0LDE5MjA2MTk4OTQsLTMxMzE1
Mjg0MSwtNjY0MjEwNDk1LC0xMzUyNDMyNzMxLDIwMTYyODA0Nz
gsLTk0NTg5NDc0NCw3MzA5OTgxMTZdfQ==
-->